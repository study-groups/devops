<!-- Design Token Editor - FAB Button -->
<button class="design-fab" data-action="toggle-panel" id="designFab">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="28" height="28">
        <circle cx="50" cy="50" r="45" fill="#ffffff" opacity="0.15"/>
        <rect x="25" y="30" width="18" height="18" rx="3" fill="#58a6ff"/>
        <rect x="47" y="30" width="18" height="18" rx="3" fill="#3fb950"/>
        <rect x="69" y="30" width="18" height="18" rx="3" fill="#d29922"/>
        <rect x="25" y="52" width="18" height="18" rx="3" fill="#f85149"/>
        <rect x="47" y="52" width="18" height="18" rx="3" fill="#c9d1d9"/>
        <rect x="69" y="52" width="18" height="18" rx="3" fill="#8b949e"/>
        <circle cx="50" cy="50" r="45" fill="none" stroke="#ffffff" stroke-width="2" opacity="0.8"/>
    </svg>
</button>

<!-- Design Token Panel -->
<div class="design-panel" id="designPanel">
    <div class="design-panel-header">
        <span>Design Tokens</span>
        <span class="design-panel-close" data-action="close-panel">&times;</span>
    </div>
    <div class="design-panel-content">

        <!-- Theme Switcher -->
        <div class="token-section" data-section="switcher">
            <div class="token-section-header" data-action="toggle-section" data-target="switcher">
                <span>Theme Switcher</span>
                <span class="section-toggle">▼</span>
            </div>
            <div class="token-section-content">
                <div class="metadata-field">
                    <label>Active Theme</label>
                    <select id="themeSwitcher" class="font-select mt-0" data-action="switch-theme">
                        <option value="">-- Select Theme --</option>
                    </select>
                </div>
                <div class="design-panel-buttons mt-half">
                    <button class="design-panel-btn design-panel-btn--primary flex-1" data-action="save-theme" id="saveThemeBtn">
                        Save Current
                    </button>
                    <button class="design-panel-btn design-panel-btn--secondary flex-1" data-action="delete-theme" id="deleteThemeBtn">
                        Delete
                    </button>
                </div>
                <div id="themeFeedback" class="theme-feedback hidden"></div>
            </div>
        </div>

        <!-- Theme Metadata -->
        <div class="token-section" data-section="metadata">
            <div class="token-section-header" data-action="toggle-section" data-target="metadata">
                <span>Theme Metadata</span>
                <span class="section-toggle">▼</span>
            </div>
            <div class="token-section-content">
                <div class="metadata-field">
                    <label>Name</label>
                    <input type="text" id="themeName" value="my-theme" class="font-input">
                </div>
                <div class="metadata-field">
                    <label>Version</label>
                    <input type="text" id="themeVersion" value="1.0.0" class="font-input">
                </div>
                <div class="metadata-field">
                    <label>Description</label>
                    <input type="text" id="themeDescription" value="Custom theme" class="font-input">
                </div>
                <div class="metadata-field">
                    <label>Author</label>
                    <input type="text" id="themeAuthor" value="Designer" class="font-input">
                </div>
                <div class="metadata-field">
                    <label>Temperature</label>
                    <select id="themeTemperature" class="font-select">
                        <option value="warm">Warm</option>
                        <option value="cool">Cool</option>
                        <option value="neutral" selected>Neutral</option>
                    </select>
                </div>
                <div class="metadata-field">
                    <label>Color Mode</label>
                    <select id="themeColorMode" class="font-select">
                        <option value="dark" selected>Dark</option>
                        <option value="light">Light</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Colors Section -->
        <div class="token-section" data-section="colors">
            <div class="token-section-header" data-action="toggle-section" data-target="colors">
                <span>Colors</span>
                <span class="section-toggle">▼</span>
            </div>
            <div class="token-section-content">
                <!-- Background Colors -->
                <div class="token-group">
                    <div class="token-group-title">Background</div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--bg-primary" value="#1a1a2e">
                        <div class="token-swatch" style="background: var(--bg-primary)"></div>
                        <div class="token-info">
                            <div class="token-name">--bg-primary</div>
                            <div class="token-value" id="token-bg-primary">#1a1a2e</div>
                        </div>
                    </div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--bg-secondary" value="#16213e">
                        <div class="token-swatch" style="background: var(--bg-secondary)"></div>
                        <div class="token-info">
                            <div class="token-name">--bg-secondary</div>
                            <div class="token-value" id="token-bg-secondary">#16213e</div>
                        </div>
                    </div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--bg-tertiary" value="#0d1b2a">
                        <div class="token-swatch" style="background: var(--bg-tertiary)"></div>
                        <div class="token-info">
                            <div class="token-name">--bg-tertiary</div>
                            <div class="token-value" id="token-bg-tertiary">#0d1b2a</div>
                        </div>
                    </div>
                </div>

                <!-- Text Colors -->
                <div class="token-group">
                    <div class="token-group-title">Text</div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--text-title" value="#eaeaea">
                        <div class="token-swatch" style="background: var(--text-title)"></div>
                        <div class="token-info">
                            <div class="token-name">--text-title</div>
                            <div class="token-value" id="token-text-title">#eaeaea</div>
                        </div>
                    </div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--text-primary" value="#c0c0d0">
                        <div class="token-swatch" style="background: var(--text-primary)"></div>
                        <div class="token-info">
                            <div class="token-name">--text-primary</div>
                            <div class="token-value" id="token-text-primary">#c0c0d0</div>
                        </div>
                    </div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--text-secondary" value="#8a8aa0">
                        <div class="token-swatch" style="background: var(--text-secondary)"></div>
                        <div class="token-info">
                            <div class="token-name">--text-secondary</div>
                            <div class="token-value" id="token-text-secondary">#8a8aa0</div>
                        </div>
                    </div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--text-code" value="#ff6b6b">
                        <div class="token-swatch" style="background: var(--text-code)"></div>
                        <div class="token-info">
                            <div class="token-name">--text-code</div>
                            <div class="token-value" id="token-text-code">#ff6b6b</div>
                        </div>
                    </div>
                </div>

                <!-- Accent Colors -->
                <div class="token-group">
                    <div class="token-group-title">Accent</div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--accent-primary" value="#e94560">
                        <div class="token-swatch" style="background: var(--accent-primary)"></div>
                        <div class="token-info">
                            <div class="token-name">--accent-primary</div>
                            <div class="token-value" id="token-accent-primary">#e94560</div>
                        </div>
                    </div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--accent-secondary" value="#3b82c4">
                        <div class="token-swatch" style="background: var(--accent-secondary)"></div>
                        <div class="token-info">
                            <div class="token-name">--accent-secondary</div>
                            <div class="token-value" id="token-accent-secondary">#3b82c4</div>
                        </div>
                    </div>
                </div>

                <!-- Status Colors -->
                <div class="token-group">
                    <div class="token-group-title">Status</div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--success" value="#3fb950">
                        <div class="token-swatch" style="background: var(--success)"></div>
                        <div class="token-info">
                            <div class="token-name">--success</div>
                            <div class="token-value" id="token-success">#3fb950</div>
                        </div>
                    </div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--warning" value="#d29922">
                        <div class="token-swatch" style="background: var(--warning)"></div>
                        <div class="token-info">
                            <div class="token-name">--warning</div>
                            <div class="token-value" id="token-warning">#d29922</div>
                        </div>
                    </div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--error" value="#f85149">
                        <div class="token-swatch" style="background: var(--error)"></div>
                        <div class="token-info">
                            <div class="token-name">--error</div>
                            <div class="token-value" id="token-error">#f85149</div>
                        </div>
                    </div>
                </div>

                <!-- Border Color -->
                <div class="token-group">
                    <div class="token-group-title">Border</div>
                    <div class="token-item">
                        <input type="color" class="token-picker" data-action="update-token" data-token="--border" value="#2a2a4a">
                        <div class="token-swatch" style="background: var(--border)"></div>
                        <div class="token-info">
                            <div class="token-name">--border</div>
                            <div class="token-value" id="token-border">#2a2a4a</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Layout Section -->
        <div class="token-section" data-section="layout">
            <div class="token-section-header" data-action="toggle-section" data-target="layout">
                <span>Layout</span>
                <span class="section-toggle">▼</span>
            </div>
            <div class="token-section-content">
                <div class="token-group">
                    <div class="token-group-title">Section Style</div>
                    <div class="control-group">
                        <label class="field-label">Border Style</label>
                        <select class="font-select mt-0" data-action="update-section-border" id="sectionBorderStyle">
                            <option value="left">Left accent (default)</option>
                            <option value="full-muted">Full border (muted)</option>
                            <option value="full-accent">Full border (accent)</option>
                            <option value="none">No border</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="field-label">Corner Radius</label>
                        <input type="range" min="0" max="24" value="8" data-action="update-section-radius" id="sectionRadius">
                        <div style="display: flex; justify-content: space-between; font-size: 0.7rem; color: var(--fab-text-secondary);">
                            <span>Sharp</span>
                            <span id="sectionRadiusValue">8px</span>
                            <span>Round</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="field-label">Sidebar Position</label>
                        <select class="font-select mt-0" data-action="update-sidebar-position" id="sidebarPosition">
                            <option value="right">Right (default)</option>
                            <option value="left">Left</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Typography Section -->
        <div class="token-section collapsed" data-section="typography">
            <div class="token-section-header" data-action="toggle-section" data-target="typography">
                <span>Typography</span>
                <span class="section-toggle">▶</span>
            </div>
            <div class="token-section-content">
                <div class="token-group">
                    <div class="fab-card">
                        <label class="field-label">Add Google Font</label>
                        <textarea class="font-input" id="fontEmbedCode" placeholder="Paste Google Fonts embed code here..." style="height: 60px; resize: vertical;"></textarea>
                        <button class="add-font-btn" data-action="add-font">Add Font to Page</button>

                        <div class="font-example-toggle" data-action="toggle-font-example">
                            &#9656; Show example
                        </div>

                        <div class="font-example-content" id="fontExampleContent">
                            <strong>How to add Google Fonts:</strong>
                            <ol>
                                <li>Go to <a href="https://fonts.google.com" target="_blank">fonts.google.com</a></li>
                                <li>Select one or more fonts and click <strong>"Get font"</strong></li>
                                <li>Click <strong>"Get embed code"</strong></li>
                                <li>Copy the entire embed code (all &lt;link&gt; tags)</li>
                                <li>Paste it above - multi-font suites are supported!</li>
                            </ol>
                            <div class="fab-tip">
                                <strong>Tip:</strong> Mono fonts (Cascadia, Fira Code) auto-assign to Code. Sans fonts auto-assign to Heading/Body.
                            </div>
                            <div class="fab-code-sample">
                                &lt;link href="https://fonts.googleapis.com/css2?family=Inter&amp;family=Cascadia+Mono&display=swap" rel="stylesheet"&gt;
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="field-label">Heading Font</label>
                        <select class="font-select mt-0" data-action="update-font" data-font-type="heading" id="headingFont">
                            <option value="-apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif">System (Default)</option>
                            <option value="'Courier New', monospace">Courier New</option>
                            <option value="Monaco, monospace">Monaco</option>
                            <option value="'SF Mono', monospace">SF Mono</option>
                            <option value="'Roboto Mono', monospace">Roboto Mono</option>
                            <option value="Georgia, serif">Georgia</option>
                            <option value="'Times New Roman', serif">Times New Roman</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="field-label">Body Font</label>
                        <select class="font-select mt-0" data-action="update-font" data-font-type="body" id="bodyFont">
                            <option value="-apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif">System (Default)</option>
                            <option value="'Courier New', monospace">Courier New</option>
                            <option value="Monaco, monospace">Monaco</option>
                            <option value="'SF Mono', monospace">SF Mono</option>
                            <option value="'Roboto Mono', monospace">Roboto Mono</option>
                            <option value="Georgia, serif">Georgia</option>
                            <option value="Arial, sans-serif">Arial</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label class="field-label">Code Font</label>
                        <select class="font-select mt-0" data-action="update-font" data-font-type="code" id="codeFont">
                            <option value="'Courier New', Monaco, monospace">Courier New (Default)</option>
                            <option value="Monaco, monospace">Monaco</option>
                            <option value="'SF Mono', monospace">SF Mono</option>
                            <option value="'Roboto Mono', monospace">Roboto Mono</option>
                            <option value="Consolas, monospace">Consolas</option>
                            <option value="'Fira Code', monospace">Fira Code</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Export/Import Section -->
        <div class="token-section collapsed" data-section="export">
            <div class="token-section-header" data-action="toggle-section" data-target="export">
                <span>Export / Import</span>
                <span class="section-toggle">▶</span>
            </div>
            <div class="token-section-content">
                <div class="token-group">
                    <div class="token-group-title">Theme (tokens.json)</div>
                    <div class="design-panel-buttons mt-half">
                        <button class="design-panel-btn design-panel-btn--primary flex-1" data-action="export-theme" id="exportThemeBtn">
                            Download Theme
                        </button>
                        <button class="design-panel-btn design-panel-btn--secondary flex-1" data-action="import-theme" id="importThemeBtn">
                            Import Theme
                        </button>
                    </div>
                    <p class="help-text">
                        Download/import full theme with metadata, groups, and TDS mapping
                    </p>
                    <div id="exportFeedback" class="theme-feedback hidden"></div>
                </div>

                <div class="token-group">
                    <div class="token-group-title">CSS Variables</div>
                    <div class="design-panel-buttons mt-half">
                        <button class="design-panel-btn design-panel-btn--secondary flex-1" data-action="copy-css" id="copyCSSBtn">
                            Copy CSS
                        </button>
                        <button class="design-panel-btn design-panel-btn--danger flex-1" data-action="reset-tokens" id="resetTokensBtn">
                            Reset All
                        </button>
                    </div>
                    <div id="cssFeedback" class="theme-feedback hidden"></div>
                </div>
            </div>
        </div>

    </div>
</div>
