{
  "metadata": {
    "title": "TUT Reference",
    "tagline": "Data-Driven Documentation Generator",
    "description": "Complete reference for the TUT tutorial and reference documentation system",
    "version": "1.0.0",
    "author": "tetra"
  },
  "groups": [
    {
      "id": "overview",
      "title": "Overview",
      "topics": [
        {
          "id": "what-is-tut",
          "title": "What is TUT?",
          "description": "TUT is a data-driven documentation generator that converts JSON definitions into multiple output formats. It supports tutorials (step-by-step guides) and reference docs (scrollable topic-based documentation).",
          "content": [
            {
              "type": "module-grid",
              "modules": [
                { "name": "Tutorials", "description": "Step-by-step interactive guides with terminal simulation" },
                { "name": "Reference", "description": "Scrollable topic-based docs with sidebar navigation" },
                { "name": "Markdown", "description": "Annotated markdown for CLI browsing" },
                { "name": "API Docs", "description": "REST endpoints and function signatures" }
              ]
            }
          ]
        },
        {
          "id": "quick-start",
          "title": "Quick Start",
          "description": "Get started generating documentation in seconds.",
          "content": [
            {
              "type": "code-block",
              "code": "# Initialize a new tutorial\ntut init my-tutorial\n\n# Generate HTML output\ntut generate my-tutorial.json\n\n# Generate reference docs\ntut reference my-ref.json\n\n# Preview in browser\ntut serve my-tutorial.html"
            }
          ]
        }
      ]
    },
    {
      "id": "cli",
      "title": "CLI Commands",
      "topics": [
        {
          "id": "tut-generate",
          "title": "tut generate",
          "description": "Generate tutorial output from JSON definition.",
          "content": [
            {
              "type": "api-function",
              "name": "tut generate",
              "signature": "tut generate <json_file> [--format html|md|all] [--output file]",
              "summary": "Converts a tutorial JSON file to the specified output format(s).",
              "parameters": [
                { "name": "json_file", "type": "path", "description": "Path to the tutorial JSON definition" },
                { "name": "--format", "type": "string", "default": "html", "description": "Output format: html, md, or all" },
                { "name": "--output", "type": "path", "description": "Custom output file path" }
              ],
              "returns": {
                "type": "file",
                "description": "Generated HTML or Markdown file in TUT_DIR/generated/"
              },
              "example": "tut generate tsm-tutorial.json --format all"
            }
          ]
        },
        {
          "id": "tut-reference",
          "title": "tut reference",
          "description": "Generate scrollable reference documentation.",
          "content": [
            {
              "type": "api-function",
              "name": "tut reference",
              "signature": "tut reference <json_file> [output_file]",
              "summary": "Generates HTML reference documentation with sidebar navigation and scroll spy.",
              "parameters": [
                { "name": "json_file", "type": "path", "description": "Path to the reference JSON definition" },
                { "name": "output_file", "type": "path", "description": "Custom output path (default: TUT_DIR/generated/<name>-reference.html)" }
              ],
              "example": "tut reference nh-tetra-ref.json"
            }
          ]
        },
        {
          "id": "tut-init",
          "title": "tut init",
          "description": "Create a new tutorial from template.",
          "content": [
            {
              "type": "api-function",
              "name": "tut init",
              "signature": "tut init <name>",
              "summary": "Creates a new tutorial JSON file with valid template structure.",
              "parameters": [
                { "name": "name", "type": "string", "description": "Tutorial name (becomes filename and title)" }
              ],
              "example": "tut init my-awesome-tutorial"
            }
          ]
        },
        {
          "id": "tut-other",
          "title": "Other Commands",
          "content": [
            {
              "type": "command-list",
              "commands": [
                { "code": "tut validate <json>", "description": "Validate tutorial JSON against schema" },
                { "code": "tut serve <file>", "description": "Open generated file in browser" },
                { "code": "tut list", "description": "List generated tutorials and JSON definitions" },
                { "code": "tut schema view", "description": "Display the tutorial schema" },
                { "code": "tut schema edit", "description": "Edit the schema in $EDITOR" }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "content-types",
      "title": "Content Types",
      "topics": [
        {
          "id": "paragraph",
          "title": "paragraph",
          "description": "Simple text block.",
          "content": [
            {
              "type": "code-block",
              "language": "json",
              "code": "{\n  \"type\": \"paragraph\",\n  \"text\": \"Your text content here.\"\n}"
            }
          ]
        },
        {
          "id": "command-list",
          "title": "command-list",
          "description": "List of commands with descriptions. Ideal for CLI reference.",
          "content": [
            {
              "type": "code-block",
              "language": "json",
              "code": "{\n  \"type\": \"command-list\",\n  \"commands\": [\n    { \"code\": \"cmd arg\", \"description\": \"What it does\" },\n    { \"code\": \"cmd --flag\", \"description\": \"Another command\" }\n  ]\n}"
            },
            {
              "type": "paragraph",
              "text": "Renders as:"
            },
            {
              "type": "command-list",
              "commands": [
                { "code": "cmd arg", "description": "What it does" },
                { "code": "cmd --flag", "description": "Another command" }
              ]
            }
          ]
        },
        {
          "id": "code-block",
          "title": "code-block",
          "description": "Fenced code with optional language and caption.",
          "content": [
            {
              "type": "code-block",
              "language": "json",
              "code": "{\n  \"type\": \"code-block\",\n  \"language\": \"bash\",\n  \"code\": \"echo 'Hello World'\",\n  \"caption\": \"Optional caption text\"\n}"
            }
          ]
        },
        {
          "id": "module-grid",
          "title": "module-grid",
          "description": "Grid of cards for displaying modules, features, or options.",
          "content": [
            {
              "type": "code-block",
              "language": "json",
              "code": "{\n  \"type\": \"module-grid\",\n  \"modules\": [\n    { \"name\": \"Module A\", \"description\": \"Does X\" },\n    { \"name\": \"Module B\", \"description\": \"Does Y\" }\n  ]\n}"
            },
            {
              "type": "paragraph",
              "text": "Renders as:"
            },
            {
              "type": "module-grid",
              "modules": [
                { "name": "Module A", "description": "Does X" },
                { "name": "Module B", "description": "Does Y" }
              ]
            }
          ]
        },
        {
          "id": "list",
          "title": "list",
          "description": "Ordered or unordered list.",
          "content": [
            {
              "type": "code-block",
              "language": "json",
              "code": "{\n  \"type\": \"list\",\n  \"ordered\": false,\n  \"items\": [\"First item\", \"Second item\", \"Third item\"]\n}"
            }
          ]
        },
        {
          "id": "table",
          "title": "table",
          "description": "Data table with headers and rows.",
          "content": [
            {
              "type": "code-block",
              "language": "json",
              "code": "{\n  \"type\": \"table\",\n  \"headers\": [\"Name\", \"Type\", \"Description\"],\n  \"rows\": [\n    [\"id\", \"string\", \"Unique identifier\"],\n    [\"title\", \"string\", \"Display title\"]\n  ]\n}"
            },
            {
              "type": "paragraph",
              "text": "Renders as:"
            },
            {
              "type": "table",
              "headers": ["Name", "Type", "Description"],
              "rows": [
                ["id", "string", "Unique identifier"],
                ["title", "string", "Display title"]
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "api-types",
      "title": "API Content Types",
      "topics": [
        {
          "id": "api-endpoint",
          "title": "api-endpoint",
          "description": "REST API endpoint documentation with method, path, parameters, and responses.",
          "content": [
            {
              "type": "code-block",
              "language": "json",
              "code": "{\n  \"type\": \"api-endpoint\",\n  \"method\": \"POST\",\n  \"path\": \"/api/users\",\n  \"summary\": \"Create a new user\",\n  \"parameters\": [\n    { \"name\": \"email\", \"type\": \"string\", \"required\": true, \"description\": \"User email\" }\n  ],\n  \"requestBody\": {\n    \"contentType\": \"application/json\",\n    \"example\": \"{\\\"email\\\": \\\"user@example.com\\\", \\\"name\\\": \\\"John\\\"}\"\n  },\n  \"responses\": [\n    { \"status\": 201, \"description\": \"Created\", \"example\": \"{\\\"id\\\": \\\"123\\\"}\" },\n    { \"status\": 400, \"description\": \"Invalid request\" }\n  ]\n}"
            },
            {
              "type": "paragraph",
              "text": "Renders as:"
            },
            {
              "type": "api-endpoint",
              "method": "POST",
              "path": "/api/users",
              "summary": "Create a new user account",
              "parameters": [
                { "name": "email", "type": "string", "required": true, "description": "User email address" },
                { "name": "name", "type": "string", "required": true, "description": "Display name" }
              ],
              "requestBody": {
                "contentType": "application/json",
                "example": "{\n  \"email\": \"user@example.com\",\n  \"name\": \"John Doe\"\n}"
              },
              "responses": [
                { "status": 201, "description": "User created successfully", "example": "{ \"id\": \"usr_123\", \"email\": \"user@example.com\" }" },
                { "status": 400, "description": "Invalid request body" },
                { "status": 409, "description": "Email already exists" }
              ]
            }
          ]
        },
        {
          "id": "api-function",
          "title": "api-function",
          "description": "Function/method documentation with signature, parameters, returns, and example.",
          "content": [
            {
              "type": "code-block",
              "language": "json",
              "code": "{\n  \"type\": \"api-function\",\n  \"name\": \"processData\",\n  \"signature\": \"processData(input, options?)\",\n  \"summary\": \"Processes input data with given options.\",\n  \"parameters\": [\n    { \"name\": \"input\", \"type\": \"string\", \"description\": \"Raw input data\" },\n    { \"name\": \"options\", \"type\": \"object\", \"default\": \"{}\", \"description\": \"Processing options\" }\n  ],\n  \"returns\": { \"type\": \"Result\", \"description\": \"Processed result object\" },\n  \"example\": \"const result = processData('raw', { format: 'json' })\"\n}"
            },
            {
              "type": "paragraph",
              "text": "Renders as:"
            },
            {
              "type": "api-function",
              "name": "processData",
              "signature": "processData(input, options?)",
              "summary": "Processes input data with given options.",
              "parameters": [
                { "name": "input", "type": "string", "description": "Raw input data to process" },
                { "name": "options", "type": "object", "default": "{}", "description": "Processing options" }
              ],
              "returns": { "type": "Result", "description": "Processed result object" },
              "example": "const result = processData('raw', { format: 'json' })"
            }
          ]
        },
        {
          "id": "api-endpoint-examples",
          "title": "More API Examples",
          "description": "Additional endpoint examples showing different HTTP methods.",
          "content": [
            {
              "type": "api-endpoint",
              "method": "GET",
              "path": "/api/users/:id",
              "summary": "Retrieve a user by ID",
              "parameters": [
                { "name": "id", "type": "string", "required": true, "description": "User ID" }
              ],
              "responses": [
                { "status": 200, "description": "User found" },
                { "status": 404, "description": "User not found" }
              ]
            },
            {
              "type": "api-endpoint",
              "method": "DELETE",
              "path": "/api/users/:id",
              "summary": "Delete a user",
              "parameters": [
                { "name": "id", "type": "string", "required": true, "description": "User ID to delete" }
              ],
              "responses": [
                { "status": 204, "description": "User deleted" },
                { "status": 404, "description": "User not found" }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "structure",
      "title": "Document Structure",
      "topics": [
        {
          "id": "reference-structure",
          "title": "Reference Doc Structure",
          "description": "Reference documents are organized into groups containing topics.",
          "content": [
            {
              "type": "code-block",
              "language": "json",
              "code": "{\n  \"metadata\": {\n    \"title\": \"My Docs\",\n    \"tagline\": \"Optional subtitle\",\n    \"description\": \"SEO description\"\n  },\n  \"groups\": [\n    {\n      \"id\": \"getting-started\",\n      \"title\": \"Getting Started\",\n      \"collapsed\": false,\n      \"topics\": [\n        {\n          \"id\": \"install\",\n          \"title\": \"Installation\",\n          \"description\": \"How to install...\",\n          \"content\": [ ... ]\n        }\n      ]\n    }\n  ]\n}"
            }
          ]
        },
        {
          "id": "tutorial-structure",
          "title": "Tutorial Structure",
          "description": "Tutorials are linear step-by-step guides with terminal simulation.",
          "content": [
            {
              "type": "code-block",
              "language": "json",
              "code": "{\n  \"metadata\": {\n    \"title\": \"My Tutorial\",\n    \"difficulty\": \"beginner\",\n    \"estimatedTime\": 15\n  },\n  \"steps\": [\n    {\n      \"id\": \"step-1\",\n      \"title\": \"Step 1\",\n      \"content\": [ ... ],\n      \"terminal\": [\n        { \"type\": \"prompt\", \"content\": \"$ \" },\n        { \"type\": \"command\", \"content\": \"echo hello\" },\n        { \"type\": \"output\", \"content\": \"hello\" }\n      ]\n    }\n  ]\n}"
            }
          ]
        },
        {
          "id": "file-organization",
          "title": "File Organization",
          "content": [
            {
              "type": "table",
              "headers": ["Path", "Purpose"],
              "rows": [
                ["tut/tut.sh", "Main CLI entry point"],
                ["tut/includes.sh", "Module loader"],
                ["tut/tut_reference.sh", "Reference doc renderer"],
                ["tut/renderers/html.sh", "Tutorial HTML renderer"],
                ["tut/renderers/markdown.sh", "Markdown renderer"],
                ["tut/templates/reference/", "CSS and JS for reference docs"],
                ["tut/examples/", "Example JSON definitions"],
                ["$TUT_DIR/generated/", "Output files"]
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "theming",
      "title": "Theming",
      "collapsed": true,
      "topics": [
        {
          "id": "design-tokens",
          "title": "Design Tokens",
          "description": "TUT uses CSS custom properties for theming. Override these in the theme object or via custom CSS.",
          "content": [
            {
              "type": "table",
              "headers": ["Token", "Default", "Purpose"],
              "rows": [
                ["--color-primary-500", "#e94560", "Primary accent color"],
                ["--bg-app", "#1a1a2e", "Page background"],
                ["--bg-surface", "#16213e", "Card/section background"],
                ["--text-primary", "#eaeaea", "Main text color"],
                ["--text-heading", "#e94560", "Heading color"]
              ]
            }
          ]
        },
        {
          "id": "custom-theme",
          "title": "Custom Theme",
          "description": "Set custom colors in the metadata.",
          "content": [
            {
              "type": "code-block",
              "language": "json",
              "code": "{\n  \"metadata\": { ... },\n  \"theme\": {\n    \"accentColor\": \"#00ff88\",\n    \"headingColor\": \"#00ff88\"\n  }\n}"
            }
          ]
        }
      ]
    }
  ]
}
