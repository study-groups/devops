<!doctype html>
<html>
<head>
    <title>Tetra Console</title>
    <link rel="stylesheet" href="style.css" />
    <script src="tetra-terminal-api.js"></script>
</head>
<body>
    <div id="tetra-container">
        <header>
            <div class="header-title">
                <h1>Tetra Console</h1>
                <p id="tetra-description" class="tetra-description" style="display: none;">Unified DevOps orchestration platform for managing TKM, TSM, Deploy, and PBase operations with terminal access and SSH connectivity.</p>
            </div>

            <div class="header-controls">
                <div id="context-badges">
                    <span class="context-badge active" data-context="TKM">TKM</span>
                    <span class="context-badge" data-context="TSM">TSM</span>
                    <span class="context-badge" data-context="DEPLOY">DEPLOY</span>
                    <span class="context-badge" data-context="PBASE">PBASE</span>
                    <span class="context-badge" data-context="PLACEHOLDER1">-</span>
                    <span class="context-badge" data-context="PLACEHOLDER2">-</span>
                </div>

                <div class="panel-toggles">
                    <button id="toggle-connection" class="square-toggle active" title="Toggle Connection Panel">C</button>
                    <button id="toggle-actions" class="square-toggle active" title="Toggle Actions Panel">A</button>
                    <button id="toggle-terminal" class="square-toggle active" title="Toggle Terminal">T</button>
                    <button id="toggle-output" class="square-toggle active" title="Toggle Output Log">O</button>
                </div>

            </div>

            <div class="header-status">
                <button id="status-connect-btn" class="status-button">
                    <div class="status-line">Tetra Console</div>
                    <div class="status-line">Status: <span id="current-state" style="color: #c586c0; font-weight: bold;">IDLE</span></div>
                </button>
            </div>
        </header>

        <div id="context-panel" class="panel-visible">
            <h2>Connection</h2>
            <div class="context-grid">
                <label for="connection-mode">Mode:</label>
                <select id="connection-mode">
                    <option value="local">Local Server</option>
                    <option value="ssh">Remote SSH</option>
                </select>

                <div id="ssh-fields" style="display: none;">
                    <label for="ssh-host">Host:</label>
                    <input type="text" id="ssh-host" value="dev.pixeljamarcade.com" placeholder="dev.pixeljamarcade.com">

                    <label for="ssh-username">User:</label>
                    <input type="text" id="ssh-username" value="dev" placeholder="dev">

                    <label for="ssh-port">Port:</label>
                    <input type="number" id="ssh-port" value="22">

                    <label for="ssh-private-key">Key:</label>
                    <textarea id="ssh-private-key" rows="6" placeholder="-----BEGIN OPENSSH PRIVATE KEY-----"></textarea>

                    <label for="ssh-passphrase">Pass:</label>
                    <input type="password" id="ssh-passphrase" placeholder="optional">

                    <label>Actions:</label>
                    <div class="key-actions">
                        <button type="button" id="save-ssh-key" class="key-btn">Save Key (30min)</button>
                        <button type="button" id="load-ssh-key" class="key-btn">Load Saved</button>
                        <button type="button" id="clear-ssh-key" class="key-btn">Clear</button>
                    </div>
                </div>

                <label for="repo-dir">Repo:</label>
                <input type="text" id="repo-dir" value="github.com/mricos/pixeljam">

                <label for="project-dir">Dir:</label>
                <input type="text" id="project-dir" value="/home/dev/src/pixeljam">

                <label for="merge-branch">Branch:</label>
                <input type="text" id="merge-branch" value="restore/pre-refactor">
            </div>
        </div>

        <div id="action-panel" class="panel-visible">
            <h2 id="actions-title">Actions for TKM</h2>
            <p id="actions-info" class="actions-info">TKM - Tetra Key Management: Secure key generation, storage, and rotation for DevOps infrastructure</p>
            <div class="action-buttons" id="action-buttons">
                <button id="btn-merge" disabled>Merge</button>
                <button id="btn-prep" disabled>Prep</button>
                <button id="btn-build" disabled>Build</button>
                <button id="btn-restart" disabled>Start</button>
                <button id="btn-stop" disabled>Stop</button>
            </div>
        </div>

        <main id="terminal-container" class="panel-visible">
            <iframe id="terminal-iframe"
                    src="tetra-terminal.html?autoConnect=false"
                    style="width: 100%; height: 100%; border: none; background: #1e1e1e;">
            </iframe>
        </main>

        <div id="output-log" class="panel-visible">
            <h3>Output Log</h3>
            <div id="output-content">
                <p class="log-entry info">Tetra Console initialized - Ready for TKM operations</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
