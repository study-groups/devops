[service]
name = "pbase"
command = "node server.js"
description = "PBase - Game API Server"

[shared]
PORT = "2600"
PBASE_PORT = "2600"
PBASE_SRC = "/home/dev/src/devops/pbase"
PD_DIR = "/home/dev/tetra/orgs/pixeljam-arcade/pdata"
GAMES_DIR = "/home/dev/tetra/orgs/pixeljam-arcade/games"
S3_BUCKET = "pja-games"
S3_ENDPOINT = "https://sfo3.digitaloceanspaces.com"

[secrets]
S3_ACCESS_KEY = "$DO_SPACES_KEY"
S3_SECRET_KEY = "$DO_SPACES_SECRET"
RESEND_API_KEY = "$RESEND_API_KEY"

# Convention: paths derived from TETRA_ORG
#   PD_DIR = $TETRA_DIR/orgs/<org>/pdata
#   GAMES_DIR = $TETRA_DIR/orgs/<org>/games
# Override with explicit env vars if needed

[local]
PBASE_ENV = "local"
TETRA_DIR = "$HOME/tetra"
TETRA_ORG = "pixeljam-arcade"
cwd = "$PBASE_SRC/server"

[dev]
PBASE_ENV = "dev"
TETRA_DIR = "/home/dev/tetra"
TETRA_ORG = "pixeljam-arcade"
cwd = "/home/dev/src/devops/pbase/server"

[staging]
PBASE_ENV = "staging"
TETRA_DIR = "/home/staging/tetra"
TETRA_ORG = "pixeljam-arcade"
cwd = "/home/staging/src/devops/pbase/server"

[prod]
PBASE_ENV = "prod"
TETRA_DIR = "/home/prod/tetra"
TETRA_ORG = "pixeljam-arcade"
cwd = "/home/prod/src/devops/pbase/server"
