
    <!DOCTYPE html>
    <html>
    <head>
        <title>DOM Tree Visualization</title>
        <style>
            body { font-family: monospace; margin: 20px; }
            .debug-log { 
                background: #f0f0f0; 
                padding: 10px; 
                margin: 10px 0; 
                max-height: 300px; 
                overflow-y: auto; 
            }
            details { margin-left: 20px; }
            summary { cursor: pointer; }
            .legend {
                display: flex;
                gap: 20px;
                margin: 10px 0;
            }
            .legend-item {
                display: flex;
                align-items: center;
                gap: 5px;
            }
            .color-box {
                width: 20px;
                height: 20px;
                border-radius: 4px;
            }
            .container {
                display: flex;
                justify-content: space-between;
            }
            .left-pane, .right-pane {
                width: 48%;
            }
            .form-section {
                margin-bottom: 20px;
            }
            .form-row {
                margin-bottom: 10px;
            }
        </style>
    </head>
    <body>
        <h1>DOM Tree Visualization</h1>
        
        <div class="legend">
            <div class="legend-item">
                <div class="color-box" style="background: #a8e6cf"></div>
                <span>Parent Context</span>
            </div>
            <div class="legend-item">
                <div class="color-box" style="background: #ffaaa5"></div>
                <span>Target Node</span>
            </div>
            <div class="legend-item">
                <div class="color-box" style="background: #ffd3b6"></div>
                <span>Children</span>
            </div>
        </div>

        <div class="container">
            <!-- Left Pane with Tree View and Debug Log -->
            <div class="left-pane">
                <div class="form-section">
                    <div class="form-row">
                        <label for="selector">Selector:</label>
                        <input id="selector" value=".game-container" />
                    </div>
                    <div class="form-row">
                        <label for="parentDepth">Parent Depth:</label>
                        <input id="parentDepth" value="2" />
                    </div>
                    <div class="form-row">
                        <label for="childDepth">Child Depth:</label>
                        <input id="childDepth" value="0" />
                    </div>
                    <div class="form-row">
                        <label for="analysisSelect">Quick Targets:</label>
                        <select id="analysisSelect">
                            <option value="game-container">game-container</option>
                            <option value="game-iframe">game-iframe</option>
                            <option value="body">body</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <button onclick="doSearch()">Enter</button>
                    </div>
                </div>

                <details>
                    <summary>Debug Log</summary>
                    <pre class="debug-log">Starting search with selector=".game-container", beforeDepth=2, childrenDepth=1
Checking HTML at path depth 0
Classes: 
Checking HEAD at path depth 1
Classes: 
Checking META at path depth 2
Classes: 
Checking LINK at path depth 2
Classes: 
Checking META at path depth 2
Classes: 
Checking TITLE at path depth 2
Classes: 
Checking META at path depth 2
Classes: 
Checking META at path depth 2
Classes: s-sUQjOwymxsBv
Checking STYLE at path depth 2
Classes: 
Checking STYLE at path depth 2
Classes: 
Checking STYLE at path depth 2
Classes: 
Checking STYLE at path depth 2
Classes: 
Checking STYLE at path depth 2
Classes: 
Checking STYLE at path depth 2
Classes: 
Checking STYLE at path depth 2
Classes: 
Checking STYLE at path depth 2
Classes: 
Checking BODY at path depth 1
Classes: 
Checking DIV at path depth 2
Classes: 
Checking svg at path depth 3
Classes: 
Checking defs at path depth 4
Classes: 
Checking g at path depth 5
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking path at path depth 6
Classes: 
Checking DIV at path depth 3
Classes: arcade
Checking svg at path depth 4
Classes: 
Checking defs at path depth 5
Classes: 
Checking g at path depth 6
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking path at path depth 7
Classes: 
Checking INPUT at path depth 4
Classes: hidden, theme-controller, s-OTmmHBhb3fXp
Checking DIV at path depth 4
Classes: hidden, lg:block, fixed, z-40, left-0, w-full, pointer-events-none, s-OTmmHBhb3fXp
Checking DIV at path depth 5
Classes: page-width, flex, s-OTmmHBhb3fXp
Checking H2 at path depth 6
Classes: mini-nav, pointer-events-auto, h-title-block, bg-paper-light, chunky-shadow-title, flex, items-end, justify-start, s-OTmmHBhb3fXp, compact
Checking A at path depth 7
Classes: main-title, block, relative, text-one, s-OTmmHBhb3fXp
Checking svg at path depth 8
Classes: arcade-logo, logo-front, s-OTmmHBhb3fXp
Checking use at path depth 9
Classes: s-OTmmHBhb3fXp
Checking svg at path depth 8
Classes: arcade-logo, logo-shadow, text-shade, s-OTmmHBhb3fXp
Checking use at path depth 9
Classes: s-OTmmHBhb3fXp
Checking HEADER at path depth 4
Classes: w-full, fixed, z-40, lg:z-0, lg:relative, lg:bg-paper-dark, text-base, s-OTmmHBhb3fXp
Checking DIV at path depth 5
Classes: lg:hidden, nav-background, s-OTmmHBhb3fXp
Checking DIV at path depth 5
Classes: page-width, relative, flex, flex-wrap, items-start, justify-end, lg:justify-between, s-OTmmHBhb3fXp
Checking A at path depth 6
Classes: contents, s-OTmmHBhb3fXp
Checking H2 at path depth 7
Classes: lg:hidden, mobile-nav, pointer-events-auto, bg-one, chunky-shadow-title, flex, items-end, justify-start, s-OTmmHBhb3fXp
Checking svg at path depth 8
Classes: arcade-logo, mini, fill-shade, s-OTmmHBhb3fXp
Checking use at path depth 9
Classes: s-OTmmHBhb3fXp
Checking BUTTON at path depth 6
Classes: lg:hidden, mobile-nav, menu-toggle, font-display, chunky-shadow-title, flex, items-end, ml-auto, s-OTmmHBhb3fXp
Checking svg at path depth 7
Classes: md:hidden, arcade-logo, logo-front, s-OTmmHBhb3fXp
Checking use at path depth 8
Classes: s-OTmmHBhb3fXp
Checking SPAN at path depth 7
Classes: hidden, md:block, text-shade, s-OTmmHBhb3fXp
Checking DIV at path depth 6
Classes: hidden, lg:block, mr-8, w-1/4, xl:w-1/6, s-OTmmHBhb3fXp
Checking DIV at path depth 6
Classes: flex-break, mb-14, lg:hidden, s-OTmmHBhb3fXp
Checking NAV at path depth 6
Classes: contents, lg:block, z-10, ml-auto, mr-8, lg:mx-auto, header-menu, font-display, text-sm, lg:text-base, s-OTmmHBhb3fXp
Checking UL at path depth 7
Classes: flex, flex-col, items-end, lg:flex-row, md:mt-8, lg:mt-6, s-OTmmHBhb3fXp
Checking DIV at path depth 6
Classes: flex-break, mb-8, lg:hidden, s-OTmmHBhb3fXp
Checking DIV at path depth 6
Classes: secondary, contents, lg:block, z-30, lg:w-48, xl:w-60, h-title-block, p-4, pt-0, bg-paper-mid, chunky-shadow-title, font-display, text-sm, lg:text-base, text-ink, s-OTmmHBhb3fXp
Checking DIV at path depth 7
Classes: flex, flex-col-reverse, lg:flex-row, h-full, items-end, justify-end, content-between, place-content-end, flex-wrap, text-ink, s-OTmmHBhb3fXp
Checking DIV at path depth 8
Classes: theme-controls, flex, s-OTmmHBhb3fXp
Checking BUTTON at path depth 9
Classes: font-display, theme-button, text-shade, bg-three, lg:text-ink, lg:bg-shade, flex, items-end, justify-start, p-0, s-OTmmHBhb3fXp
Checking SPAN at path depth 10
Classes: block, ml-auto, mr-2, s-OTmmHBhb3fXp
Checking DIV at path depth 10
Classes: theme-palette, flex, s-OTmmHBhb3fXp
Checking DIV at path depth 11
Classes: bg-paper-dark, s-OTmmHBhb3fXp
Checking DIV at path depth 11
Classes: bg-paper-mid, s-OTmmHBhb3fXp
Checking DIV at path depth 11
Classes: bg-paper-light, s-OTmmHBhb3fXp
Checking DIV at path depth 11
Classes: bg-ink, s-OTmmHBhb3fXp
Checking DIV at path depth 11
Classes: bg-four, s-OTmmHBhb3fXp
Checking DIV at path depth 11
Classes: bg-two, s-OTmmHBhb3fXp
Checking DIV at path depth 11
Classes: bg-three, s-OTmmHBhb3fXp
Checking DIV at path depth 11
Classes: bg-one, s-OTmmHBhb3fXp
Checking BUTTON at path depth 9
Classes: hidden, lg:flex, font-display, anim-button, text-ink, bg-shade, items-end, justify-center, p-0, s-OTmmHBhb3fXp
Checking SPAN at path depth 10
Classes: block, mx-auto, s-OTmmHBhb3fXp
Checking DIV at path depth 6
Classes: z-20, mask-band, bg-paper-dark, hidden, lg:block, s-OTmmHBhb3fXp
Checking DIV at path depth 5
Classes: noise-band, bg-shade, hidden, lg:block, s-OTmmHBhb3fXp
Checking DIV at path depth 4
Classes: w-full, h-20, lg:h-16, s-OTmmHBhb3fXp
Checking MAIN at path depth 4
Classes: flex, flex-col, min-h-screen
Checking HEADER at path depth 5
Classes: mb-2, sm:mb-4, md:mb-6, lg:mb-8
Checking SECTION at path depth 5
Classes: w-full, flex, flex-col, items-center, justify-start, flex-grow, s-sUQjOwymxsBv
Checking DIV at path depth 6
Classes: game-container, w-full, max-w-[1200px], mx-auto, px-4, s-sUQjOwymxsBv
Found class "game-container" at path depth 6
Creating context with beforeDepth=2, childrenDepth=1</pre>
                </details>

                <h3>Tree View</h3>
                
    <details open>
        <summary style="background-color: #a8e6cf; padding: 5px; margin: 2px; border-radius: 4px;">
            SECTION class="w-full flex flex-col items-center justify-start flex-grow s-sUQjOwymxsBv" 
            
        </summary>
        
    <details open>
        <summary style="background-color: #ffaaa5; padding: 5px; margin: 2px; border-radius: 4px;">
            DIV class="game-container w-full max-w-[1200px] mx-auto px-4 s-sUQjOwymxsBv" 
            
        </summary>
        
    <details open>
        <summary style="background-color: #ffd3b6; padding: 5px; margin: 2px; border-radius: 4px;">
            BUTTON class="w-full bg-cover bg-center rounded-md cursor-pointer relative s-sUQjOwymxsBv" 
            
        </summary>
        
    </details>
    
    </details>
    
    </details>
    
            </div>

            <!-- Right Pane with iFrame -->
            <div class="right-pane">
                <div class="form-section">
                    <label>iFrame src:</label>
                    <input id="iframeSrc" oninput="updateIframeSrc()" placeholder="https://example.com" style="width: 100%;" />
                </div>
                <iframe id="previewFrame" src="" style="width:100%; height:600px; border:1px solid #999;"></iframe>
            </div>
        </div>

        <script>
            function doSearch() {
                const selector = document.getElementById('selector').value.trim();
                const parentDepth = document.getElementById('parentDepth').value.trim();
                const childDepth = document.getElementById('childDepth').value.trim();
                const quickTarget = document.getElementById('analysisSelect').value;

                // Example: forming a JSON body to POST to an API
                const body = {
                    analysisId: "my-analysis",
                    selector: selector || '.game-container',
                    parentDepth: parseInt(parentDepth, 10) || 0,
                    childDepth: parseInt(childDepth, 10) || 0
                };

                // Optional usage of the quick target just as a demonstration
                console.log("Quick target chosen:", quickTarget);

                // Example fetch call
                // This won't work unless you have a server listening on localhost:2650
                fetch('http://localhost:2650/api/search', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': 'gridranger'
                    },
                    body: JSON.stringify(body)
                })
                .then(r => r.json())
                .then(resp => {
                    console.log("Response from server:", resp);
                    alert("Simulated POST completed. Check console for response.");
                })
                .catch(err => {
                    console.error("Error during fetch:", err);
                });
            }

            function updateIframeSrc() {
                const val = document.getElementById('iframeSrc').value;
                const frame = document.getElementById('previewFrame');
                frame.src = val;
            }
        </script>

    </body>
    </html>
    