# Save this as fix.patch, then run: git apply --ignore-whitespace fix.patch

diff --git a/internal/tui/server.go b/internal/tui/server.go
new file mode 100644
index 0000000..b3a3c6b
--- /dev/null
+++ b/internal/tui/server.go
@@ -0,0 +1,18 @@
+package tui
+
+import tea "github.com/charmbracelet/bubbletea"
+
+// HTTP server disabled: provide no-op commands to satisfy callers.
+func (m *Model) startServerCmd() tea.Cmd {
+	return func() tea.Msg { return nil }
+}
+
+func (m *Model) shutdownServerCmd() tea.Cmd {
+	return func() tea.Msg { return nil }
+}
diff --git a/internal/tui/model.go b/internal/tui/model.go
index 5a8a2a1..2d7b5c1 100644
--- a/internal/tui/model.go
+++ b/internal/tui/model.go
@@ -1,12 +1,12 @@
 package tui
 
 import (
 	"fmt"
 	"os"
 	"path/filepath"
-	"strings"
+	"strings"
 
 	"github.com/charmbracelet/bubbles/textarea"
 	"github.com/charmbracelet/bubbles/viewport"
 	tea "github.com/charmbracelet/bubbletea"
 	"github.com/charmbracelet/glamour"
 )
@@ -168,6 +168,38 @@ func (m *Model) adjustBand(which string, delta int) {
 	}
 }
 
+// --- CLI handling (restored) ---
+// handleInput parses the REPL line and executes a registered command.
+// It updates rightVP with command output or error and resets the input.
+func (m *Model) handleInput() {
+	input := strings.TrimSpace(m.repl.Value())
+	if input == "" {
+		return
+	}
+	// echo line to right pane
+	m.rightContent = "â–¶ " + input
+	m.rightVP.SetContent(m.rightContent)
+
+	parts := strings.Fields(input)
+	cmdName := parts[0]
+	var args []string
+	if len(parts) > 1 {
+		args = parts[1:]
+	}
+
+	if cmd, ok := m.commands[cmdName]; ok {
+		if res, err := cmd.Executor(m, args); err != nil {
+			m.rightContent = "Error: " + err.Error()
+		} else if res != "" {
+			m.rightContent = res
+		}
+	} else {
+		m.rightContent = "Error: Unknown command '" + cmdName + "'"
+	}
+	m.rightVP.SetContent(m.rightContent)
+	m.repl.Reset()
+	m.updateSuggestions()
+}
+
 func (m *Model) buildTree(root string, allow func(string, os.DirEntry) bool) string {
 	var b strings.Builder
 	prefix := ""
